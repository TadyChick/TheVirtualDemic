
<!DOCTYPE html>
<html>
	<head>
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta charset="utf-8" />
		<link
			rel="stylesheet"
			href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css"
			integrity="sha256-kLaT2GOSpHechhsozzB+flnD+zUyjE2LlfWPgU04xyI="
			crossorigin=""
		/>
		<script type="importmap">
			{
				"imports": {
					"leaflet": "https://unpkg.com/leaflet@1.9.3/dist/leaflet-src.esm.js",
					"gleo/": "https://unpkg.com/gleo@0.8.0/src/",
					"leaflet-gleo": "https://github.com/TadyChick/TheVirtualDemic/blob/main/LeafletGleo.js"
				}
			}
		</script>
	</head>
	<body style="margin: 0">
		<div id="leaflet-map" style="width: 100vw; height: 50vh"></div>
		<script type="module">
			import { Map, TileLayer } from "leaflet";

			import HeatPoint from "gleo/symbols/HeatPoint.mjs";
			// import CircleFill from "gleo/symbols/CircleFill.mjs";
			import AcetateHeatMap from "gleo/acetates/AcetateHeatMap.mjs";
			import LatLng from "gleo/geometry/LatLng.mjs";

			import LeafletGleo from "leaflet-gleo";

			const map = new Map("leaflet-map");

			map.setView([0, 0], 1);

			// Tile layer directly to Leaflet
			const tiles = new TileLayer("https://tile.osm.org/{z}/{x}/{y}.png", {
				attribution:
					"<a href='http://osm.org/copyright'>Â© OpenStreetMap contributors</a>",
			}).addTo(map);

			// Leaflet-Gleo bridging
			const platina = new LeafletGleo(map, {
				/* platina options */
			});

			// Gleo specific stuff
			const heatmap = new AcetateHeatMap(platina, {
				queryable: true,
				stops: {
					0: [255, 0, 0, 0],
					10: [255, 0, 0, 255],
					100: [255, 255, 0, 255],
					200: [0, 255, 0, 255],
					500: [0, 255, 255, 255],
				},
				zIndex: 3000,
			});

			new HeatPoint(new LatLng([0, 0]), { intensity: 100, radius: 100 }).addTo(
				heatmap
			);
			new HeatPoint(new LatLng([40, -3]), { intensity: 100, radius: 100 }).addTo(
				heatmap
			);
			// new CircleFill(new LatLng([0,0]), {colour: 'red', radius: 100}).addTo(heatmap);
		</script>
	</body>
</html>